{"version":3,"sources":["webpack:///./$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.html","webpack:///./src/app/list/list.component.html","webpack:///./src/app/app.component.scss","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/google-places.service.ts","webpack:///./src/app/list/list.component.scss","webpack:///./src/app/list/list.component.ts","webpack:///./src/app/map/map.component.ts","webpack:///./src/app/state.reducers.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","module.exports = \"<app-map></app-map>\\n<app-list></app-list>\\n\"","module.exports = \"<div class=\\\"no-results\\\"\\n     *ngIf=\\\"parks.length === 0\\\">\\n  <h3>No Parks Found</h3>\\n</div>\\n<div class=\\\"has-results\\\"\\n     *ngIf=\\\"parks.length > 0\\\">\\n  <h3>{{parks.length}} Park{{parks.length === 1 ? '' : 's'}} Found</h3>\\n  <ul>\\n    <li *ngFor=\\\"let park of parks\\\">\\n      <button class=\\\"name\\\"\\n              (click)=\\\"onClickPark(park)\\\">{{park.place.name}}</button>\\n      <span class=\\\"directions\\\"><a target=\\\"_blank\\\"\\n           href=\\\"{{directionsUrl(park.place)}}\\\"\\n           title=\\\"Directions\\\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n               width=\\\"24\\\"\\n               height=\\\"24\\\"\\n               viewBox=\\\"0 0 24 24\\\">\\n            <path\\n                  d=\\\"M21.71 11.29l-9-9c-.39-.39-1.02-.39-1.41 0l-9 9c-.39.39-.39 1.02 0 1.41l9 9c.39.39 1.02.39 1.41 0l9-9c.39-.38.39-1.01 0-1.41zM14 14.5V12h-4v3H8v-4c0-.55.45-1 1-1h5V7.5l3.5 3.5-3.5 3.5z\\\" />\\n            <path d=\\\"M0 0h24v24H0z\\\"\\n                  fill=\\\"none\\\" /></svg></a></span></li>\\n  </ul>\\n</div>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, ViewChild, OnInit } from '@angular/core';\nimport {} from 'googlemaps';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'park-list';\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { AppComponent } from './app.component';\nimport { MapComponent } from './map/map.component';\nimport { ListComponent } from './list/list.component';\nimport { StoreModule } from '@ngrx/store';\nimport { actionReducerMap } from './state.reducers';\n\n@NgModule({\n  declarations: [AppComponent, MapComponent, ListComponent],\n  imports: [BrowserModule, StoreModule.forRoot({ ...actionReducerMap })],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import { Injectable } from '@angular/core';\nimport { Observable, bindCallback } from 'rxjs';\n\nexport type PlaceResult = google.maps.places.PlaceResult;\nexport type PlacesServiceStatus = google.maps.places.PlacesServiceStatus;\nexport type PlaceSearchPagination = google.maps.places.PlaceSearchPagination;\nexport type Map = google.maps.Map;\nexport type Marker = google.maps.Marker;\nexport type LatLng = google.maps.LatLng;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GooglePlacesService {\n  map: google.maps.Map;\n\n  setMap = (map: google.maps.Map) => {\n    this.map = map;\n    return this;\n  };\n\n  getParks = (): Observable<\n    [PlaceResult[], PlacesServiceStatus, PlaceSearchPagination]\n  > => {\n    return bindCallback(this.nearbySearch)();\n  };\n\n  private nearbySearch = (\n    callback: (\n      results: PlaceResult[],\n      status: PlacesServiceStatus,\n      pagination: PlaceSearchPagination\n    ) => void\n  ) => {\n    const service = new google.maps.places.PlacesService(this.map);\n    const request = {\n      type: 'park',\n      location: this.map.getCenter(),\n      radius: 1500,\n      bounds: this.map.getBounds(),\n      fields: ['name', 'geometry']\n    };\n    service.nearbySearch(request, callback);\n  };\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2xpc3QvbGlzdC5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { PlaceResult, LatLng } from '../google-places.service';\nimport { Store } from '@ngrx/store';\nimport { AppState, SET_ORIGIN, Park } from '../state.reducers';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.scss']\n})\nexport class ListComponent implements OnInit {\n  parks: Park[] = [];\n  origin: LatLng;\n  constructor(private store: Store<AppState>) {\n    this.store\n      .select<Park[]>(state => state.parks)\n      .subscribe(parks => {\n        this.parks = parks;\n      });\n    this.store\n      .select<LatLng>(state => state.origin)\n      .subscribe(origin => {\n        this.origin = origin;\n      });\n  }\n  directionsUrl(place: PlaceResult) {\n    return `https://www.google.com/maps/dir/${this.origin.toUrlValue()}/${place.geometry.location.toUrlValue()}`;\n  }\n\n  onClickPark(park: Park) {\n    new google.maps.event.trigger(park.marker, 'click');\n  }\n  ngOnInit() {}\n}\n","import { Component, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\nimport {\n  GooglePlacesService,\n  PlaceResult,\n  LatLng\n} from '../google-places.service';\nimport { Store } from '@ngrx/store';\nimport { SET_PARKS, AppState, SET_ORIGIN, Park } from '../state.reducers';\n\nconst defaultCoords = {\n  latitude: 36.8471508,\n  longitude: -76.2953987\n};\n\nfunction getCoords(): Promise<{ latitude: number; longitude: number }> {\n  return new Promise(resolve => {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        position => resolve(position.coords),\n        _ => resolve(defaultCoords),\n        { timeout: 1000 }\n      );\n    } else {\n      resolve(defaultCoords);\n    }\n  });\n}\n\n@Component({\n  selector: 'app-map',\n  template: '<div #mapContainer></div>',\n  encapsulation: ViewEncapsulation.None\n})\nexport class MapComponent implements OnInit {\n  @ViewChild('mapContainer', { static: true }) mapElement: any;\n  map: google.maps.Map;\n  parks: Park[];\n\n  constructor(\n    private googlePlacesService: GooglePlacesService,\n    private store: Store<AppState>\n  ) {\n    this.googlePlacesService = googlePlacesService;\n    this.store = store;\n  }\n\n  ngOnInit(): void {\n    getCoords().then(coords => {\n      this.store.dispatch({\n        type: SET_ORIGIN,\n        payload: new google.maps.LatLng(coords.latitude, coords.longitude)\n      });\n      this.setupMap(\n        this.mapElement.nativeElement,\n        coords.latitude,\n        coords.longitude\n      );\n    });\n\n    this.store\n      .select<LatLng>(state => state.origin)\n      .subscribe(origin => {\n        if (this.map) this.map.setCenter(origin);\n      });\n\n    this.store\n      .select<Park[]>(state => state.parks)\n      .subscribe(parks => {\n        this.parks = parks;\n      });\n  }\n\n  setupMap = (mapElement: Element, latitude: number, longitude: number) => {\n    this.map = new google.maps.Map(mapElement, {\n      center: new google.maps.LatLng(latitude, longitude),\n      zoom: 15,\n      mapTypeId: google.maps.MapTypeId.ROADMAP\n    });\n\n    let debounceCenterChanged = setTimeout(() => {}, 0);\n    const loadParkMarkersDebounced = () => {\n      clearTimeout(debounceCenterChanged);\n      debounceCenterChanged = setTimeout(() => {\n        this.loadParkMarkers();\n      }, 500);\n    };\n\n    this.map.addListener('center_changed', loadParkMarkersDebounced);\n    this.map.addListener('bounds_changed', loadParkMarkersDebounced);\n\n    this.loadParkMarkers();\n  };\n\n  loadParkMarkers = () => {\n    let oldMarkers = this.parks.map(park => park.marker);\n    const infowindow = new google.maps.InfoWindow();\n\n    this.googlePlacesService\n      .setMap(this.map)\n      .getParks()\n      .subscribe(([results, status, pagination]) => {\n        if (status !== google.maps.places.PlacesServiceStatus.OK) {\n          return;\n        }\n        const parks = results.map(result => ({\n          place: result,\n          marker: createMarker(this.map, result)\n        }));\n\n        pagination.hasNextPage && pagination.nextPage();\n        replaceMarkers(oldMarkers, parks.map(park => park.marker));\n        this.store.dispatch({ type: SET_PARKS, payload: parks });\n      });\n\n    function replaceMarkers(\n      markers: google.maps.Marker[],\n      newMarkers: google.maps.Marker[]\n    ) {\n      setTimeout(() => {\n        for (const marker of markers) {\n          marker.setMap(null);\n        }\n        markers = [...newMarkers];\n      }, 250);\n    }\n\n    function createMarker(\n      map: google.maps.Map,\n      place: PlaceResult\n    ): google.maps.Marker {\n      const marker = new google.maps.Marker({\n        map,\n        position: place.geometry.location,\n        icon: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n      });\n\n      google.maps.event.addListener(marker, 'click', function() {\n        infowindow.setContent(place.name);\n        infowindow.open(map, this);\n      });\n\n      return marker;\n    }\n  };\n}\n","import { PlaceResult, Marker, LatLng } from './google-places.service';\nimport { Action } from '@ngrx/store';\n\nexport interface Park {\n  place: PlaceResult;\n  marker: Marker;\n}\n\nexport interface AppState {\n  parks: Park[];\n  origin: LatLng;\n}\n\nexport const SET_PARKS = 'SET_PARKS';\nexport const SET_ORIGIN = 'SET_ORIGIN';\n\ninterface StateAction extends Action {\n  payload: any;\n}\n\nexport const actionReducerMap = {\n  parks: (state: Park[] = [], action: StateAction) => {\n    return SET_PARKS === action.type ? action.payload : state;\n  },\n  origin: (state: LatLng = null, action: StateAction) => {\n    return SET_ORIGIN === action.type ? action.payload : state;\n  }\n};\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":""}