{"version":3,"sources":["webpack:///./$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.html","webpack:///./src/app/list/list.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/google-map.service.ts","webpack:///./src/app/list/list.component.ts","webpack:///./src/app/map/map.component.ts","webpack:///./src/app/state.reducers.ts","webpack:///./src/app/store.service.ts","webpack:///./src/app/utils.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,wE;;;;;;;;;;;ACZA,+D;;;;;;;;;;;ACAA,0LAA0L,cAAc,OAAO,+BAA+B,wIAAwI,iBAAiB,sFAAsF,2BAA2B,4gB;;;;;;;;;;;;;;;;;ACA3b;AAO7D,IAAa,YAAY,GAAzB,MAAa,YAAY;IAJzB;QAKE,UAAK,GAAG,WAAW,CAAC;IACtB,CAAC;CAAA;AAFY,YAAY;IAJxB,+DAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,uIAAmC;KACpC,CAAC;GACW,YAAY,CAExB;AAFwB;;;;;;;;;;;;;;;;;;;;;;;;ACPiC;AACjB;AACM;AACI;AACG;AACZ;AACU;AAQpD,IAAa,SAAS,GAAtB,MAAa,SAAS;CAAG;AAAZ,SAAS;IANrB,8DAAQ,CAAC;QACR,YAAY,EAAE,CAAC,2DAAY,EAAE,+DAAY,EAAE,kEAAa,CAAC;QACzD,OAAO,EAAE,CAAC,uEAAa,EAAE,uDAAW,CAAC,OAAO,mBAAM,gEAAgB,EAAG,CAAC;QACtE,SAAS,EAAE,EAAE;QACb,SAAS,EAAE,CAAC,2DAAY,CAAC;KAC1B,CAAC;GACW,SAAS,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;ACdqB;AACK;AAWD;AACX;AAKpC,IAAa,gBAAgB,wBAA7B,MAAa,gBAAgB;IAO3B,YAAoB,KAAuB;QAAvB,UAAK,GAAL,KAAK,CAAkB;QAH3C,UAAK,GAAY,EAAE,CAAC;QACpB,uBAAkB,GAAG,UAAU,CAAC,GAAG,EAAE,GAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAO7C,YAAO,GAAG,CAAC,UAAuB,EAAE,QAAgB,EAAE,SAAiB,EAAE,EAAE;YACzE,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;YAE3D,IAAI,CAAC,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE;gBACzC,MAAM;gBACN,IAAI,EAAE,EAAE;gBACR,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO;aACzC,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YACpC,IAAI,CAAC,UAAU,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;YAC/C,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;YACzD,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAC3D,CAAC,CAAC;QAEF,cAAS,GAAG,CAAC,MAAc,EAAE,EAAE;YAC7B,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QAC7B,CAAC,CAAC;QAEF,aAAQ,GAAG,GAAqD,EAAE;YAChE,OAAO,yDAAY,CACjB,CACE,QAAuE,EACvE,EAAE;gBACF,MAAM,OAAO,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC/D,MAAM,OAAO,GAAG;oBACd,IAAI,EAAE,MAAM;oBACZ,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE;oBAC9B,MAAM,EAAE,IAAI;oBACZ,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE;oBAC5B,MAAM,EAAE,CAAC,MAAM,EAAE,UAAU,CAAC;iBAC7B,CAAC;gBACF,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;YAC1C,CAAC,CACF,EAAE,CAAC;QACN,CAAC,CAAC;QAEF,gBAAW,GAAG,GAAG,EAAE;YACjB,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;YACtC,IAAI,CAAC,kBAAkB,GAAG,UAAU,CAAC,GAAG,EAAE;gBACxC,MAAM,UAAU,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC5D,IAAI,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,EAAE,MAAM,CAAC,EAAE,EAAE;oBAC9C,IAAI,MAAM,KAAK,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,EAAE,EAAE;wBACxD,OAAO;qBACR;oBACD,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;wBAClC,KAAK,EAAE,MAAM;wBACb,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;qBACjE,CAAC,CAAC,CAAC;oBACJ,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;oBAClD,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACzC,CAAC,CAAC,CAAC;YACL,CAAC,EAAE,GAAG,CAAC,CAAC;QACV,CAAC,CAAC;QAEM,iBAAY,GAAG,CACrB,IAAY,EACZ,QAAgB,EAChB,IAAI,GAAG,kBAAgB,CAAC,WAAW,EAC3B,EAAE;YACV,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;gBACpC,GAAG,EAAE,IAAI,CAAC,GAAG;gBACb,QAAQ;gBACR,IAAI;aACL,CAAC,CAAC;YAEH,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,EAAE;gBAC7C,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;gBACjC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC;YACH,OAAO,MAAM,CAAC;QAChB,CAAC,CAAC;QA1EA,2CAA2C;QAC3C,IAAI,CAAC,YAAY,GAAG,IAAI,2DAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACnD,CAAC;CAyEF;AAlFQ,4BAAW,GAAG,wDAAwD,CAAC;;YAMnD,iDAAK;;AAPrB,gBAAgB;IAH5B,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;2EAQ2B,iDAAK;GAPrB,gBAAgB,CAmF5B;AAnF4B;;;;;;;;;;;;;;;;;;;;AClB6B;AACV;AAEZ;AAMpC,IAAa,aAAa,GAA1B,MAAa,aAAa;IAKxB,YAAoB,KAAuB;QAAvB,UAAK,GAAL,KAAK,CAAkB;QAJ3C,UAAK,GAAY,EAAE,CAAC;QAKlB,2CAA2C;QAC3C,IAAI,CAAC,YAAY,GAAG,IAAI,2DAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEjD,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE;YACtC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACrB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;YACxC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,aAAa,CAAC,KAAkB;QAC9B,OAAO,mCAAmC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,UAAU,EAAE,EAAE,CAAC;IAC/G,CAAC;IAED,WAAW,CAAC,IAAW;QACrB,iDAAiD;QACjD,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IACtD,CAAC;IACD,QAAQ,KAAI,CAAC;CACd;;YArB4B,iDAAK;;AALrB,aAAa;IAJzB,+DAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,8IAAoC;KACrC,CAAC;2EAM2B,iDAAK;GALrB,aAAa,CA0BzB;AA1ByB;;;;;;;;;;;;;;;;;;;;ACHH;AACc;AAEoB;AAQzD,IAAa,YAAY,GAAzB,MAAa,YAAY;IAEvB,YAA2C,UAAuB;QAAvB,eAAU,GAAV,UAAU,CAAa;IAAG,CAAC;IACtE,QAAQ;QACN,wDAAS,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;YACxB,IAAI,CAAC,UAAU,CAAC,OAAO,CACrB,IAAI,CAAC,UAAU,CAAC,aAAa,EAC7B,MAAM,CAAC,QAAQ,EACf,MAAM,CAAC,SAAS,CACjB,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;CACF;;4CAVc,oDAAM,SAAC,aAAa;;AADY;IAA5C,+DAAS,CAAC,cAAc,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;;gDAAiB;AADlD,YAAY;IANxB,+DAAS,CAAC;QACT,QAAQ,EAAE,SAAS;QACnB,QAAQ,EAAE,2BAA2B;QACrC,aAAa,EAAE,+DAAiB,CAAC,IAAI;QACrC,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,oEAAgB,EAAE,CAAC;KACpE,CAAC;IAGa,6GAAM,CAAC,aAAa,CAAC;;GAFvB,YAAY,CAYxB;AAZwB;;;;;;;;;;;;;ACdzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,MAAM,SAAS,GAAG,WAAW,CAAC;AAC9B,MAAM,UAAU,GAAG,YAAY,CAAC;AAEhC,MAAM,eAAe,GAAG,CAAC,QAAiB,EAAE,EAAE,MAAoB,EAAE,EAAE;IAC3E,OAAO,SAAS,KAAK,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC;AAC5D,CAAC,CAAC;AAEK,MAAM,gBAAgB,GAAG,CAC9B,QAAgB,IAAI,EACpB,MAAoB,EACpB,EAAE;IACF,OAAO,UAAU,KAAK,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC;AAC7D,CAAC,CAAC;AAEK,MAAM,gBAAgB,GAAG;IAC9B,KAAK,EAAE,CAAC,QAAiB,EAAE,EAAE,MAAoB,EAAE,EAAE;QACnD,OAAO,SAAS,KAAK,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC;IAC5D,CAAC;IACD,MAAM,EAAE,CAAC,QAAgB,IAAI,EAAE,MAAoB,EAAE,EAAE;QACrD,OAAO,UAAU,KAAK,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC;IAC7D,CAAC;CACF,CAAC;;;;;;;;;;;;;ACvBF;AAAA;AAAA;AAAA;AAAyD;AACrB;AAE7B,MAAM,YAAY;IACvB,YAAoB,KAAuB;QAAvB,UAAK,GAAL,KAAK,CAAkB;QAE3C,cAAS,GAAG,CAAC,OAAe,EAAE,EAAE;YAC9B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;gBAClB,IAAI,EAAE,0DAAU;gBAChB,OAAO;aACR,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,aAAQ,GAAG,CAAC,OAAgB,EAAE,EAAE;YAC9B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;gBAClB,IAAI,EAAE,yDAAS;gBACf,OAAO;aACR,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,kBAAa,GAAG,CAAC,EAA4B,EAAE,EAAE;YAC/C,IAAI,CAAC,KAAK,CAAC,MAAM,CAAU,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;QACjE,CAAC,CAAC;QAEF,mBAAc,GAAG,CAAC,EAA4B,EAAE,EAAE;YAChD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAS,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;QACjE,CAAC,CAAC;IAtB4C,CAAC;;;YAApB,iDAAK;;;;;;;;;;;;;;ACLlC;AAAA;AAAA;AAAO,MAAM,cAAc,GAAG;IAC5B,QAAQ,EAAE,UAAU;IACpB,SAAS,EAAE,CAAC,UAAU;CACvB,CAAC;AAEK,SAAS,SAAS;IACvB,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;QAC3B,IAAI,aAAa,IAAI,SAAS,EAAE;YAC9B,SAAS,CAAC,WAAW,CAAC,kBAAkB,CACtC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,EACpC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,cAAc,CAAC,EAC5B,EAAE,OAAO,EAAE,IAAI,EAAE,CAClB,CAAC;SACH;aAAM;YACL,OAAO,CAAC,cAAc,CAAC,CAAC;SACzB;IACH,CAAC,CAAC,CAAC;AACL,CAAC;;;;;;;;;;;;;ACjBD;AAAA;AAAA,gFAAgF;AAChF,0EAA0E;AAC1E,gEAAgE;AAEzD,MAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;CAClB,CAAC;AAEF;;;;;;GAMG;AACH,mEAAmE;;;;;;;;;;;;;ACfnE;AAAA;AAAA;AAAA;AAAA;AAA+C;AAC4B;AAE9B;AACY;AAEzD,IAAI,qEAAW,CAAC,UAAU,EAAE;IAC1B,oEAAc,EAAE,CAAC;CAClB;AAED,gGAAsB,EAAE,CAAC,eAAe,CAAC,yDAAS,CAAC;KAChD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","module.exports = \"<app-map></app-map>\\n<app-list></app-list>\\n\"","module.exports = \"<div class=\\\"no-results\\\"\\n     *ngIf=\\\"parks.length === 0\\\">\\n  <h3>No Parks Found</h3>\\n</div>\\n<div class=\\\"has-results\\\"\\n     *ngIf=\\\"parks.length > 0\\\">\\n  <h3>{{parks.length}} Park{{parks.length === 1 ? '' : 's'}} Found</h3>\\n  <ul>\\n    <li *ngFor=\\\"let park of parks\\\">\\n      <button class=\\\"name\\\"\\n              (click)=\\\"onClickPark(park)\\\">{{park.place.name}}</button>\\n      <span class=\\\"directions\\\"><a target=\\\"_blank\\\"\\n           href=\\\"{{directionsUrl(park.place)}}\\\"\\n           title=\\\"Directions\\\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n               width=\\\"24\\\"\\n               height=\\\"24\\\"\\n               viewBox=\\\"0 0 24 24\\\">\\n            <path\\n                  d=\\\"M21.71 11.29l-9-9c-.39-.39-1.02-.39-1.41 0l-9 9c-.39.39-.39 1.02 0 1.41l9 9c.39.39 1.02.39 1.41 0l9-9c.39-.38.39-1.01 0-1.41zM14 14.5V12h-4v3H8v-4c0-.55.45-1 1-1h5V7.5l3.5 3.5-3.5 3.5z\\\" />\\n            <path d=\\\"M0 0h24v24H0z\\\"\\n                  fill=\\\"none\\\" /></svg></a></span></li>\\n  </ul>\\n</div>\\n\"","import { Component, ViewChild, OnInit } from '@angular/core';\nimport {} from 'googlemaps';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html'\n})\nexport class AppComponent {\n  title = 'park-list';\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { AppComponent } from './app.component';\nimport { MapComponent } from './map/map.component';\nimport { ListComponent } from './list/list.component';\nimport { StoreModule } from '@ngrx/store';\nimport { actionReducerMap } from './state.reducers';\n\n@NgModule({\n  declarations: [AppComponent, MapComponent, ListComponent],\n  imports: [BrowserModule, StoreModule.forRoot({ ...actionReducerMap })],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import { Injectable } from '@angular/core';\nimport { Observable, bindCallback } from 'rxjs';\nimport {\n  PlaceResult,\n  PlacesServiceStatus,\n  IMapService,\n  LatLng,\n  IPark,\n  Marker,\n  Map,\n  IAppState\n} from './models';\nimport { StoreService } from './store.service';\nimport { Store } from '@ngrx/store';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GoogleMapService implements IMapService {\n  static defaultIcon = 'http://maps.google.com/mapfiles/ms/icons/green-dot.png';\n  infowindow: google.maps.InfoWindow;\n  map: Map;\n  parks: IPark[] = [];\n  updateParksTimeout = setTimeout(() => {}, 0);\n  storeService: StoreService;\n  constructor(private store: Store<IAppState>) {\n    // Todo: make this require an IStoreService\n    this.storeService = new StoreService(this.store);\n  }\n\n  initMap = (mapElement: HTMLElement, latitude: number, longitude: number) => {\n    const center = new google.maps.LatLng(latitude, longitude);\n\n    this.map = new google.maps.Map(mapElement, {\n      center,\n      zoom: 15,\n      mapTypeId: google.maps.MapTypeId.ROADMAP\n    });\n    this.storeService.setOrigin(center);\n    this.infowindow = new google.maps.InfoWindow();\n    this.map.addListener('center_changed', this.updateParks);\n    this.map.addListener('bounds_changed', this.updateParks);\n  };\n\n  setCenter = (latLng: LatLng) => {\n    this.map.setCenter(latLng);\n  };\n\n  getParks = (): Observable<[PlaceResult[], PlacesServiceStatus]> => {\n    return bindCallback(\n      (\n        callback: (results: PlaceResult[], status: PlacesServiceStatus) => void\n      ) => {\n        const service = new google.maps.places.PlacesService(this.map);\n        const request = {\n          type: 'park',\n          location: this.map.getCenter(),\n          radius: 1500,\n          bounds: this.map.getBounds(),\n          fields: ['name', 'geometry']\n        };\n        service.nearbySearch(request, callback);\n      }\n    )();\n  };\n\n  updateParks = () => {\n    clearTimeout(this.updateParksTimeout);\n    this.updateParksTimeout = setTimeout(() => {\n      const oldMarkers = [...this.parks.map(park => park.marker)];\n      this.getParks().subscribe(([results, status]) => {\n        if (status !== google.maps.places.PlacesServiceStatus.OK) {\n          return;\n        }\n        this.parks = results.map(result => ({\n          place: result,\n          marker: this.createMarker(result.name, result.geometry.location)\n        }));\n        oldMarkers.forEach(marker => marker.setMap(null));\n        this.storeService.setParks(this.parks);\n      });\n    }, 250);\n  };\n\n  private createMarker = (\n    name: string,\n    position: LatLng,\n    icon = GoogleMapService.defaultIcon\n  ): Marker => {\n    const marker = new google.maps.Marker({\n      map: this.map,\n      position,\n      icon\n    });\n\n    google.maps.event.addListener(marker, 'click', function() {\n      this.infowindow.setContent(name);\n      this.infowindow.open(this.map, this);\n    });\n    return marker;\n  };\n}\n","import { Component, OnInit, Inject } from '@angular/core';\nimport { StoreService } from '../store.service';\nimport { PlaceResult, LatLng, IPark, IAppState } from '../models';\nimport { Store } from '@ngrx/store';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.component.html'\n})\nexport class ListComponent implements OnInit {\n  parks: IPark[] = [];\n  origin: LatLng;\n  storeService: StoreService;\n\n  constructor(private store: Store<IAppState>) {\n    // Todo: make this require an IStoreService\n    this.storeService = new StoreService(this.store);\n\n    this.storeService.onParksUpdate(parks => {\n      this.parks = parks;\n    });\n    this.storeService.onOriginUpdate(origin => {\n      this.origin = origin;\n    });\n  }\n\n  directionsUrl(place: PlaceResult) {\n    return `https://www.google.com/maps/dir/${this.origin.toUrlValue()}/${place.geometry.location.toUrlValue()}`;\n  }\n\n  onClickPark(park: IPark) {\n    // tslint:disable-next-line: no-unused-expression\n    new google.maps.event.trigger(park.marker, 'click');\n  }\n  ngOnInit() {}\n}\n","import {\n  Component,\n  OnInit,\n  ViewChild,\n  ViewEncapsulation,\n  Inject\n} from '@angular/core';\nimport { getCoords } from '../utils';\nimport { IMapService } from '../models';\nimport { GoogleMapService } from '../google-map.service';\n\n@Component({\n  selector: 'app-map',\n  template: '<div #mapContainer></div>',\n  encapsulation: ViewEncapsulation.None,\n  providers: [{ provide: 'IMapService', useClass: GoogleMapService }]\n})\nexport class MapComponent implements OnInit {\n  @ViewChild('mapContainer', { static: true }) mapElement: any;\n  constructor(@Inject('IMapService') private mapService: IMapService) {}\n  ngOnInit(): void {\n    getCoords().then(coords => {\n      this.mapService.initMap(\n        this.mapElement.nativeElement,\n        coords.latitude,\n        coords.longitude\n      );\n    });\n  }\n}\n","import { Action } from '@ngrx/store';\nimport { IPark, IStateAction, LatLng } from './models';\n\nexport const SET_PARKS = 'SET_PARKS';\nexport const SET_ORIGIN = 'SET_ORIGIN';\n\nexport const ParksReducerMap = (state: IPark[] = [], action: IStateAction) => {\n  return SET_PARKS === action.type ? action.payload : state;\n};\n\nexport const OriginReducerMap = (\n  state: LatLng = null,\n  action: IStateAction\n) => {\n  return SET_ORIGIN === action.type ? action.payload : state;\n};\n\nexport const actionReducerMap = {\n  parks: (state: IPark[] = [], action: IStateAction) => {\n    return SET_PARKS === action.type ? action.payload : state;\n  },\n  origin: (state: LatLng = null, action: IStateAction) => {\n    return SET_ORIGIN === action.type ? action.payload : state;\n  }\n};\n","import { IStoreService, LatLng, IPark, IAppState } from './models';\nimport { SET_PARKS, SET_ORIGIN } from './state.reducers';\nimport { Store } from '@ngrx/store';\n\nexport class StoreService implements IStoreService {\n  constructor(private store: Store<IAppState>) {}\n\n  setOrigin = (payload: LatLng) => {\n    this.store.dispatch({\n      type: SET_ORIGIN,\n      payload\n    });\n  };\n\n  setParks = (payload: IPark[]) => {\n    this.store.dispatch({\n      type: SET_PARKS,\n      payload\n    });\n  };\n\n  onParksUpdate = (cb: (parks: IPark[]) => void) => {\n    this.store.select<IPark[]>(state => state.parks).subscribe(cb);\n  };\n\n  onOriginUpdate = (cb: (latLng: LatLng) => void) => {\n    this.store.select<LatLng>(state => state.origin).subscribe(cb);\n  };\n}\n","export const DEFAULT_COORDS = {\n  latitude: 36.8471508,\n  longitude: -76.2953987\n};\n\nexport function getCoords(): Promise<{ latitude: number; longitude: number }> {\n  return new Promise(resolve => {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        position => resolve(position.coords),\n        _ => resolve(DEFAULT_COORDS),\n        { timeout: 1000 }\n      );\n    } else {\n      resolve(DEFAULT_COORDS);\n    }\n  });\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":""}